"use strict";window._ZOOM_=1;var iconPath="Chrome"==infinity.browser?"?imageMogr2/thumbnail/"+infinity.iconSize+"x/format/webp/blur/1x0/quality/100|imageslim":"?imageMogr2/thumbnail/"+infinity.iconSize+"x/format/png/blur/1x0/quality/100|imageslim",_app={init:function(){var e=this;e.initData(),e.setI18nTitle(),e.initSearches(),e.render(!0),e.setZoom(),e.onWallpaperChange(),e.setWallpaper(),e.initTopBar(),e.asyncJSLoad()},data:{top_height:30,groups:[],currentPage:0,totalPages:0,searches:[],bgNode:document.getElementById("bg")},initData:function(){var e=infinity.get("infinity-icons"),t=infinity.get("infinity-searches");this.data.groups=e,this.data.searches=t},onWallpaperChange:function(){var e=this,t=e.data.bgNode;infinity.onMessage("wallpaperTypeChange",function(){infinity.settings.load(),t.classList.add("bg-transition"),e.setWallpaper()})},setWallpaper:function(){var t=this.data.bgNode,i=void 0;if("default"==SETTING.wallpaperType||"local"==SETTING.wallpaperType)"Chrome"==infinity.browser?(i=infinity.get("infinity-wallpaper-blob"),t.style.backgroundImage="url("+i+")"):i=chrome.runtime.getBackgroundPage(function(e){i=e._wallpaper,t.style.backgroundImage="url("+i+")"});else{if("bing"==SETTING.wallpaperType)i="https://img.infinitynewtab.com/bingWallpaper/bg.jpg?md5="+SETTING.bingMd5;else if("auto"==SETTING.wallpaperType){var e=new Date,n=(e.getFullYear(),e.getMonth()+1),a=e.getDate();i=infinity.wallpaper+"/InfinityWallpaper/"+n+"_"+a+".jpg"}else"random"==SETTING.wallpaperType&&(i=SETTING["random-wallpaper"]);t.style.backgroundImage="url("+i+")"}},setI18nTitle:function(){try{document.getElementsByTagName("title")[0].innerText=infinity.i18n("i_new_tab")}catch(e){}},initSearches:function(){for(var e=this,t=e.data.searches.current.types,i="Chrome"==infinity.browser?"?imageView2/0/format/webp/q/48/v/1":"?imageView2/0/format/png/q/48/v/1",n="",a=0;a<t.length;a++)n+='<li class="se-type-li se-type-li-select-'+(0==a)+'">'+infinity.i18n(t[a].name)+"</li>";document.getElementById("search-type-init").innerHTML=n,e.data.searches.current.isCustom&&(document.getElementById("search-type-init").style.opacity="0"),document.getElementById("se-select-img").style.backgroundImage="url("+e.data.searches.current.logo+i+")",document.getElementById("se-select-img").style.backgroundColor=e.data.searches.current.bgColor,document.getElementById("search-input").setAttribute("placeholder",infinity.i18n("enter_and_search")),SETTING.isShowSearchBtn&&document.querySelector(".search-btn-input").classList.add("se-btn-show-true")},render:function(e){var i=this,t=document.getElementById("app"),n=document.getElementById("point-in");SETTING.isOpenStartAnimation&&(t.className="contain startAnimation",e&&(n.style.opacity="0"));var a="",r="";document.querySelector(".main").id="main-column-"+SETTING.column,i.data.totalPages=i.data.groups.length,i.data.groups.map(function(e,t){a+='<div class="group group-column-'+SETTING.column+" group-row-"+SETTING.row+'">',e.map(function(t,e){var i="";if(t.src)if(0==t.src.indexOf("http"))try{var n=new URL(t.src);i=n.origin+n.pathname+iconPath}catch(e){i=t.src}else i=t.src;a+='\n                    <div class="icon-item-out OPACITY" draggable="true">\n                        <div class="item-icon" url="'+t.url+'" data-icon="'+encodeURIComponent(JSON.stringify(t))+'">\n                            <div class="item-icon-del"></div>\n                            <div class="icon-img BORDERRADIUS" style="background-image:url('+i+");background-color:"+t.bgColor+';">'+(t.showText&&"text"==t.customType?t.showText:"")+'</div>\n                            <div class="icon-item-edit BORDERRADIUS"></div>\n                        </div>\n                        <div class="icon-name FONTCOLOR ICONNAMEOPACITY">'+t.name+"</div>\n                    </div>\n                "}),a+="</div>",r+='<div data-index="'+t+'" class="point-item point-select-'+(t==i.data.currentPage)+'"></div>'}),t.offsetHeight,t.addEventListener(animationendEvent,function(){n.style.opacity="1"}),document.getElementById("group-out").innerHTML=a,n.innerHTML=r,window.iDrag&&iDrag.listen()},setZoom:function(){var e=1600,t=1,i=document.body.clientWidth,n=document.body.clientHeight;1.6<i/n?(n<375?n=375:1e3<n&&(n=1e3),t=n/800):(i<600?i=600:e<i&&(i=e),t=i/1280);var a=document.querySelector(".main");_ZOOM_=(.96*t*SETTING.viewZoom).toFixed(2),.99==_ZOOM_&&(_ZOOM_=1),a.style.zoom=_ZOOM_},initTopBar:function(e){var t=e||this;SETTING.isShowTopBar?(document.body.className="show-top-bar-true",document.getElementById("topsitesbar").classList.remove("top-bar-show"),document.getElementById("bookmarkbar").classList.remove("top-bar-show"),"topsites"==SETTING.topBarType&&(document.getElementById("topsitesbar").classList.add("top-bar-show"),t.renderMostVisited()),"bookmarks"==SETTING.topBarType&&(document.getElementById("bookmarkbar").classList.add("top-bar-show"),t.renderBookmarks())):document.body.className="show-top-bar-false"},isMostVisitedRendered:!1,renderMostVisited:function(){if(!self.isMostVisitedRendered){var i='<div class="topsite-out">';infinity.get("infinity-topsites").map(function(e,t){i+='<div class="topsite-item i-link" data-href="'+e.url+'" data-target="self"><img class="topsite-item-img" src="chrome://favicon/size/16@2x/'+e.url+'"><span class="topsite-item-title">'+e.title+"</span></div>"}),i+="</div>",document.querySelector("#topsitesbar").innerHTML=i}self.isMostVisitedRendered=!0},isTopBookmarkRendered:!1,renderBookmarks:function(){},asyncJSLoad:function(){var e="vue.min.js";infinity.isDev&&(e="vue.js"),infinity.require("/lib/jquery-3.2.1.min.js").then(function(){return infinity.require("/lib/"+e)}).then(function(){return infinity.require("/lib/vue-lib.js")}).then(function(){return infinity.require("/lib/jquery-throttle-debounce.min.js")}).then(function(){return infinity.require("/lib/jquery.transit.min.js")}).then(function(){return infinity.require("/newtab/search.js")}).then(function(){return infinity.require("/lib/windmill.js")}).then(function(){return infinity.require("/lib/lethargy.min.js")}).then(function(){return infinity.require("/lib/hot-module-all.js")}).then(function(){return infinity.require("/lib/lib-async.js")}).then(function(){return infinity.require("/newtab/view.js")}).then(function(){return infinity.require("/newtab/async-top-bookmark.js")}).then(function(){return infinity.require("/newtab/edit-delete.js")}).then(function(){return infinity.require("/newtab/drag-icon.js")}).then(function(){infinity.sendMessage("ga-open-newtab")})}};_app.init();